# 3. Shop V4.0 - Deleting

Now we will add the code to delete a product, using menu option 4.

![](./img/01.png) 


Note: don't cut and paste the code in your labs, unless explicitly told to do so; you will maximise your learning by typing in the code.


## Refactoring the displayed menu

The first step is to add option 4 (delete) to the menu being displayed.  While we are at it, we may as well add option 2 (update) too...refactor the code to be this:

~~~
    private int mainMenu(){
        int option = ScannerInput.readNextInt("""
               Shop Menu
               ---------
                  1) Add a product
                  2) List the Products
                  3) Update a Product
                  4) Delete a Product
                  ----------------------------
                  5) List the current products
                  6) Display average product unit cost
                  7) Display cheapest product
                  8) List products that are more expensive than a given price
                  ----------------------------
                  0) Exit
               ==>>  """);
        return option;
    }
~~~


## Store Class - getting ready for deleting

In the Store class, we will add a series of new methods. 

First, an accessor method for the ArrayList of Products i.e.:

~~~
	public ArrayList<Product> getProducts(){
		return products;
	}
~~~

A method that will tell us the size of the ArrayList:

~~~
    public int numberOfProducts() {
        return products.size();
    }
~~~

A method that will take in a number and check if it is a valid index in the products ArrayList:

~~~
    public boolean isValidIndex(int index) {
        return (index >= 0) && (index < products.size());
    }
~~~

And finally, a method to delete the product.  Note how we used the isValidIndex method to ensure the index number passed to us is valid:

~~~
    public Product deleteProduct(int indexToDelete) {
        if (isValidIndex(indexToDelete)) {
            return products.remove(indexToDelete);
        }
        return null;
    }
~~~


## Menu Item 4:  Deleting a product

In the Driver class, make the following changes to implement case 4 (deleting a product):

~~~
     switch (option){
                case 1 -> addProduct();
                case 2 -> printProducts();
                case 4 -> deleteProduct();
                case 5 -> printCurrentProducts();
                case 6 -> printAverageProductPrice();
                case 7 -> printCheapestProduct();
                case 8 -> printProductsAboveAPrice();
                default -> System.out.println("Invalid option entered: " + option);
            }
~~~

and the code for deleteProduct():

~~~
    //ask the user to enter the index of the object to delete, and assuming it's valid, delete it.
    private void deleteProduct(){
        printProducts();
        if (store.numberOfProducts() > 0){
            //only ask the user to choose the product to delete if products exist
            int indexToDelete = ScannerInput.readNextInt("Enter the index of the product to delete ==> ");
            //pass the index of the product to Store for deleting and check for success.
            Product productToDelete = store.deleteProduct(indexToDelete);
            if (productToDelete != null){
                System.out.println("Delete Successful! Deleted product: " + productToDelete.getProductName());
            }
            else{
                System.out.println("Delete NOT Successful");
            }
        }
    }
~~~


## Testing the delete

Run the project.  We will run a few different types of tests now.

#### Positive test - we expect the delete to work

Add a product using option 1.

Test option 4 and try to delete the product you just added.  Did it work?


#### Negative test - we expect the delete to fail, correctly.

Now try to delete a product when no products exist in the ArrayList...did you get the message "No products in the store"?


#### Boundary Tests

Here we will boundary test our delete, to make sure that the index number is validated correctly, both on the + and - side.

Add two products to the arraylist and try to delete at an index that doesn't exist e.g. enter 2.  What happened?  Did you get the correct message saying "Delete NOT Successful"?  

With the two products entered, try to delete at an index that doesn't exist again...enter -1 .  What happened?  Did you get the correct message saying "Delete NOT Successful"?  


